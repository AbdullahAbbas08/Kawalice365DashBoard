<app-breadcrumb [title]="'ادارة الحلقات'">
</app-breadcrumb>
<!-- Container-fluid starts-->
<div class="container-fluid">
  <div class="row">
    <div class="col-md-12 project-list">
      <div class="card">
        <div class="row">
          <div class="col-sm-4">
            <div class="form-group" style="margin-bottom: 0px;">
              <label></label>
              <select (change)="selectHandlerProgram($event)" class="form-select form-control pt-0 pr-10" #CategoryID>
                <option value="n" selected> {{DefaultSelectProgram}} </option>
                <option *ngFor="let obj of ProgramList" value="{{obj.ID}}">
                  <h3 class="selected-value"> {{obj.Name}} </h3>
                </option>
              </select>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group" style="margin-bottom: 0px;">
              <label></label>
              <select (change)="selectChangeHandlerSeason($event)" class="form-select form-control pt-0 pr-10" [disabled]="SelectSeason" >
                <option value="n" selected> {{DefaultSelectSeason}} </option>
                <option *ngFor="let obj of _SeasonIDName" value="{{obj.ID}}" >
                  <h3  > {{obj.Name}} </h3>
                </option>
              </select>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="text-right" style="margin-top: 15px;margin-left: 15px;">
              <div class="form-group mb-0 mr-0"></div>
              <a class="btn add-btn" [routerLink]="['/project/createEpisode']"> <i data-feather="plus-square">
                </i>إضافة حلقة
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-12">
      <div class="card" style="margin: 3px ;">
        <div class="card-body">
          <div class="tab-content" id="top-tabContent">
            <div class="tab-pane fade show active" id="top-home" role="tabpanel" aria-labelledby="top-home-tab">
              <div class="row">
                <div *ngFor="let item of EpisodesListFiltered" class="col-xl-4 col-lg-6 mb-4">
                  <div class="project-box shadow">
                    <span class="badge badge-primary badge-color shadow title-style">{{item.EpisodeTitle}}</span>
                    <h6></h6>
                    <div class="media Contain-Style mt-4">
                      <i class="fas fa-layer-group mr-2 pt-1" style="color: darkgrey;"></i>
                      <div class="media-body">
                        <p> من برنامج : {{item.ProgramName}} </p>
                      </div>
                    </div>
                    <div class="Category-Img-Title" style="background-image: url({{Url}}{{item.EpisodeImg}}); background-size: cover;
                      height: 260px;">
                    </div>
                    <div class="row" style="margin-left: 0px;margin-right: 0px;">
                      <div class="col-12 description-Style" style=" padding-left: 0px;
                                                                    padding-right: 0px;
                                                                    margin-top: 10px;
                                                                    margin-bottom: 15px;">
                        <p class="Category-Description p-0"> {{item.EpisodeDescription}} </p>
                      </div>
                    </div>
                    <div class="row details " style="margin-left: 0px;margin-right: 5px;">
                      <div class="col-5"> <span> الموسم </span></div>
                      <div class="col-7" style="color:#eb2067">{{item.SeasonTitle}}</div>
                      <div class="col-5"> <span>نوع الحلقة </span></div>
                      <div class="col-7" style="color:#eb2067">{{item.ProgramTypeTitle}}</div>
                      <div class="col-5"> <span>عدد مشاهدات الحلقة </span></div>
                      <div class="col-7" style="color:#eb2067">{{item.EpisodeViews}}</div>
                      <div class="col-5"> <span>المحاور </span></div>
                      <div class="col-7" style="color:#eb2067">{{item.InterviewerName}}</div>
                      <div class="col-5"><span>ظهور الحلقة</span></div>
                      <div class="col-5 " style="color:#eb2067" *ngIf="item.EpisodeVisible; else elseBlock"> نعم </div>
                      <ng-template #elseBlock>لا </ng-template>
                      <div class="col-5"> <span>تاريخ نشر الحلقة </span></div>
                      <div class="col-7" style="color:#eb2067">{{item.EpisodePublishDate |date:'medium' }}</div>
                    </div>
                    <div class="row" style="margin-left: 0px;margin-right: 0px; margin-bottom: 10px;">
                      <div class="col-12">
                        <button class="update-btn ml-2 " (click)="UpdateEpisode(
                          item.EpisodeId         ,
                          item.EpisodeTitle      ,
                          item.EpisodeDescription,
                          item.EpisodeUrl        ,
                          item.EpisodeImg  ,
                          item.EpisodeVisible    ,
                          item.EpisodeViews      ,
                          item.EpisodePublishDate,
                          item.SessionId   , 
                          item.SeasonTitle,item.ProgramId,
                          item.ProgramName,item.CategoryId,
                          item.CategoryTitle,item.ProgramTypeId,
                          item.ProgramTypeTitle  ,
                          item.InterviewerName,
                          item.Date,
                          item.Hour,
                          item.Minute)">
                          تعديل
                        </button>
                        <button class="delete-btn mr-2" (click)="openDialog(item.EpisodeTitle,item.EpisodeId)">
                          حذف
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Container-fluid Ends-->